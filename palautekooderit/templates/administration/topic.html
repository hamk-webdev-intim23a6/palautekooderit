{% extends 'base.html' %}
{% block content %}

<h1>Hallinnoi aiheita</h1>

{# Display Django messages #}
{% if messages %}
<ul class="messages" style="list-style: none; padding: 0; margin-bottom: 15px;">
  {% for message in messages %}
  {# Basic styling for messages - adjust as needed #}
  <li{% if message.tags %} class="message {{ message.tags }}" style="padding: 10px; margin-bottom: 10px; border-radius: 4px; color: #fff; background-color: {% if 'error' in message.tags %}#dc3545{% elif 'success' in message.tags %}#28a745{% elif 'warning' in message.tags %}#ffc107{% else %}#007bff{% endif %};"{% endif %}>
    {{ message }}
  </li>
  {% endfor %}
</ul>
{% endif %}

{# Section for creating a new topic #}
<div style="border: 1px solid #ccc; padding: 15px; border-radius: 5px; margin-bottom: 30px;">
    <h2>Luo uusi palauteaihe</h2>
    <form method="post" novalidate>
        {% csrf_token %}
        {% if form.non_field_errors %}
            <div style="color: red; margin-bottom: 10px; border: 1px solid red; padding: 8px; border-radius: 4px;">
                {{ form.non_field_errors }}
            </div>
        {% endif %}
        {{ form.as_p }}
        <button type="submit">Luo aihe</button>
    </form>
</div>

{# Section listing existing topics #}
<div>
    <h2>Olemassa olevat aiheet</h2>
    {% if topics %}
        <ul style="padding-left: 20px; list-style: disc;">
            {% for topic in topics %}
                <li>{{ topic.name }}</li>
            {% empty %}
                <li>Ei vielä luotuja aiheita.</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Ei vielä luotuja aiheita.</p>
    {% endif %}
</div>

{% endblock %}